CREATE OR REPLACE VIEW DC_BOARD_GROUP_VIEW
AS
SELECT G.NO, G.BOARDNO, G.GOODSNAME, G.PRICE, G.ENDDATE, G.DEPOSIT,
    G.MAXCOUNT, B.TITLE, B.CONTENT, B.WRITEDATE,B.VIEWCOUNT, B.STATUS, B.MEMBERNO,
    (SELECT COUNT(*) FROM DC_GROUP_HISTORY_TB WHERE GROUPNO=G.NO)CURRENTCOUNT,
    (SELECT NAME FROM DC_GOODS_CATEGORY_TB GC WHERE GC.NO=G.GOODSNO)GOODSCATEGORY,
    (SELECT NICKNAME FROM DC_MEMBER_TB M WHERE M.NO=B.MEMBERNO) MEMBER,
    (SELECT VALUE FROM DC_CODE_TB C WHERE C.ID=G.STATUS) GSTATUS,
    (SELECT VALUE FROM DC_CODE_TB C WHERE C.ID=G.DEALTYPE) DEALTYPE,
    (SELECT SUBSTR(BEF, 0, INSTR(BEF, '"')-1)
     FROM (SELECT NO, SUBSTR(CONTENT, INSTR(CONTENT, 'img src="')+9) BEF FROM DC_BOARD_TB)D
     WHERE D.NO=G.BOARDNO
    ) THUMBNAIL
FROM DC_BOARD_GROUP_TB G
JOIN DC_BOARD_TB B ON (G.BOARDNO=B.NO)
WITH READ ONLY;